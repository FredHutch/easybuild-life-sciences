# John Dey Fred Hutch Cancer Center
easyblock = 'MakeCp'

name = 'TGS-GapCloser'
version = '1.2.1'
local_commit = 'e1a7e01c6259e6651a8007e4e4c3b887bef38b19'

homepage = 'https://github.com/BGI-Qingdao/TGS-GapCloser'
description = """A gap-closing software tool that uses error-prone long reads generated by
 third-generation-sequence techniques (Pacbio, Oxford Nanopore, etc.) or preassembled contigs
 to fill N-gap in the genome assembly."""

toolchain = {'name': 'GCCcore', 'version': '13.3.0'}

source_urls = ['https://github.com/BGI-Qingdao/TGS-GapCloser/archive']
sources = [{'download_filename': f'{local_commit}.tar.gz', 'filename': SOURCE_TAR_GZ}]
patches = ['TGS-GapCloser_Makefile.patch']
checksums = [
    {'TGS-GapCloser-1.2.1.tar.gz':
     '84ad526b09b7c6c6144cc60b62ab15011421ffda5c81de83e35958e08ed480b0'},
    {'TGS-GapCloser_Makefile.patch':
     '99432c84d5ce16763b792fc60084ce756056c98506b2d4c6fb4ced01aad2380d'}
]

builddependencies = [
    ('binutils', '2.42'),
    ('make', '4.4.1'),
]

dependencies = [
    ('minimap2', '2.29'),
]

files_to_copy = ['tgsgapcloserbin', 'README.md', 'tgsgapcloser']

postinstallcmds = [
    "mv %(installdir)s/tgsgapcloserbin %(installdir)s/bin",
    "sed -i 's/tgsgapcloserbin/bin/' %(installdir)s/tgsgapcloser",
]

sanity_check_paths = {
    'files': ['bin/tgsgapcloser'],
    'dirs': [],
}

sanity_check_commands = ["tgsgapcloser -h"]

moduleclass = 'bio'
